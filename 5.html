<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Blog inspirowany TM - Strona Główna</title>
<style>
:root {
  --primary-bg: #fdfbf7;
  --card-bg: #ffffff;
  --card-hover: #f3f1ec;
  --text-color: #333;
  --accent-color: #006d77;
  --accent-hover: #004f58;
  --footer-bg: #eaeaea;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: 'Georgia', serif;
  background-color: var(--primary-bg);
  color: var(--text-color);
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}

header {
  background-color: white;
  padding: 25px 15px;
  border-bottom: 1px solid #ddd;
  text-align: center;
  font-size: 1.6rem;
  font-weight: bold;
}

nav {
  background-color: white;
  border-bottom: 1px solid #ddd;
  padding: 15px;
  text-align: center;
  margin-bottom: 20px;
  font-size: 1.1rem;
}

nav a {
  margin: 0 10px;
  text-decoration: none;
  color: var(--accent-color);
  font-weight: bold;
  transition: color 0.3s ease;
}

nav a:hover { color: var(--accent-hover); }

.container { flex: 1; padding: 0 15px 30px 15px; }

#searchInput {
  width: 100%;
  padding: 12px 15px;
  font-size: 1.2rem;
  border: 1px solid #ccc;
  border-radius: 8px;
  margin: 0 auto 20px;
  display: block;
}

.slider-container {
  position: relative;
  overflow-x: auto;
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch; /* Lepsze przewijanie na iOS */
  padding-bottom: 20px;
}

/* Ukrycie paska przewijania */
.slider-container::-webkit-scrollbar {
  display: none;
}
.slider-container {
  -ms-overflow-style: none;  /* IE and Edge */
  scrollbar-width: none;  /* Firefox */
}


.cards {
  display: flex;
  gap: 20px;
  transition: transform 0.5s ease-in-out;
}

.card {
  background-color: var(--card-bg);
  border-radius: 12px;
  padding: 20px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
  flex: 0 0 90%;
  display: flex;
  flex-direction: column;
  text-align: center;
}

.card:hover { background-color: var(--card-hover); }

.card p { 
  flex-grow: 1; 
  margin-top: 10px; 
  margin-bottom: 10px; 
  text-align: center; 
  font-size: 1.1rem; 
}

.card .header h2 { 
  font-size: 1.3rem; 
  margin-bottom: 5px; 
}

.read-more { 
  margin-top: auto; 
  font-size: 1.1rem; 
}

.article-section {
  background-color: white;
  padding: 25px 15px;
  border-radius: 12px;
  margin-top: 20px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
}

.article-section h2 { 
  font-size: 1.5rem; 
  text-align: center; 
  margin-bottom: 15px; 
}

.article-section div { 
  font-size: 1.1rem; 
  line-height: 1.6; 
}

footer {
  background-color: var(--footer-bg);
  padding: 15px;
  text-align: center;
  font-size: 0.95rem;
  color: #555;
  margin-top: 20px;
}

/* kontener strzałek pod sliderem */
.slider-arrows {
  display: flex;
  justify-content: center;
  gap: 40px;
  margin-top: 15px;
}

/* strzałki */
.arrow {
  background-color: rgba(0, 107, 119, 0.8);
  color: white;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-size: 1.5rem;
  user-select: none;
  transition: background-color 0.3s ease, visibility 0.3s ease;
}

.arrow:hover { background-color: var(--accent-hover); }

/* Klasa do ukrywania strzałek na krańcach slidera (używana w JS) */
.hidden {
  visibility: hidden;
  opacity: 0;
}

/* ukrycie strzałek i dodanie swipe na mobile <701px */
@media (max-width: 700px) {
  .slider-arrows {
    display: none;
  }
  
  /* === NOWE REGUŁY DLA PRZESUWANIA PALCEM === */
  .slider-container {
    scroll-snap-type: x mandatory;
    scroll-padding: 0 20px; /* Dodaje margines, by karty nie kleiły się do krawędzi */
  }
  
  .card {
    scroll-snap-align: center; /* Każda karta jest punktem przyciągania */
  }
  /* =========================================== */
}

/* responsywne karty */
@media (min-width: 480px) { .card { flex: 0 0 48%; } }
@media (min-width: 768px) { .card { flex: 0 0 calc((100% - 2 * 20px)/3); } }
@media (min-width: 1024px) { .card { flex: 0 0 calc((100% - 3 * 30px)/4); } }

/* filtrowanie */
.hidden-by-search { display: none !important; }

</style>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>

<header>Blog inspirowany TM</header>
<nav>
  <a href="#">Start</a>
  <a href="#">Artykuły</a>
  <a href="#">Statystyki</a>
  <a href="#">Podcast</a>
  <a href="#">O mnie</a>
  <a href="#">Kontakt</a>
</nav>

<div class="container">
  <input type="text" id="searchInput" placeholder="Szukaj po tytułach artykułów..." />

 <div class="slider-container" aria-label="Slider artykułów">
  <div class="cards" id="cards">
    <div class="card"><div class="header"><h2>Jak stać się bardziej produktywnym?</h2></div><p>Poznaj 5 sprawdzonych metod...</p><a href="#" class="read-more" data-md="produktywnosc.md">Czytaj dalej →</a></div>
    <div class="card"><div class="header"><h2>Minimalizm: mniej znaczy więcej</h2></div><p>Jak ograniczenie rzeczy pomogło mi...</p><a href="#" class="read-more" data-md="minimalizm.md">Czytaj dalej →</a></div>
    <div class="card"><div class="header"><h2>Poranna rutyna ludzi sukcesu</h2></div><p>Odkryj, co łączy poranki Tima Ferrissa...</p><a href="#" class="read-more" data-md="rutyna.md">Czytaj dalej →</a></div>
    <div class="card"><div class="header"><h2>Startup bez ryzyka – jak zacząć</h2></div><p>Naucz się, jak uruchomić biznes online...</p><a href="#" class="read-more" data-md="startup.md">Czytaj dalej →</a></div>
    <div class="card"><div class="header"><h2>Kolejny artykuł testowy</h2></div><p>Opis kolejnego artykułu do testów.</p><a href="#" class="read-more" data-md="test.md">Czytaj dalej →</a></div>
    <div class="card"><div class="header"><h2>Jeszcze jeden wpis na bloga</h2></div><p>Krótki opis tego, co znajdziesz w środku.</p><a href="#" class="read-more" data-md="wpis.md">Czytaj dalej →</a></div>
  </div>
</div>

<!-- Kontener na strzałki pozostał bez zmian w HTML -->
<div class="slider-arrows">
  <div class="arrow arrow-left" id="arrowLeft">&#8592;</div>
  <div class="arrow arrow-right" id="arrowRight">&#8594;</div>
</div>

<section class="article-section" id="articleSection">
  <h2>Wybierz artykuł z listy powyżej</h2>
  <div id="articleContent"></div>
</section>
</div>

<footer>© 2025 Michał - Blog inspirowany TM</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const sliderContainer = document.querySelector('.slider-container');
  const cardsContainer = document.getElementById('cards');
  const arrowLeft = document.getElementById('arrowLeft');
  const arrowRight = document.getElementById('arrowRight');
  const searchInput = document.getElementById('searchInput');
  const allCards = Array.from(cardsContainer.children);

  const updateSliderState = () => {
    // Na mobilkach slider jest przewijany palcem, więc nie potrzebujemy logiki strzałek
    if (window.innerWidth <= 700) {
      sliderContainer.style.overflowX = 'auto'; // Upewnij się, że przewijanie jest możliwe
      cardsContainer.style.transform = 'none'; // Usuń transformację z wersji desktopowej
      return; // Zakończ funkcję dla mobile
    }
    
    // Logika dla desktop
    sliderContainer.style.overflowX = 'hidden'; // Ukryj pasek przewijania na desktop
    
    const visibleCards = allCards.filter(card => !card.classList.contains('hidden-by-search'));
    if (visibleCards.length === 0) {
        arrowLeft.classList.add('hidden');
        arrowRight.classList.add('hidden');
        return;
    }

    const cardWidth = visibleCards[0].offsetWidth;
    const gap = parseInt(window.getComputedStyle(cardsContainer).gap, 10) || 20;
    const containerWidth = sliderContainer.offsetWidth;
    
    // Ile kart mieści się w kontenerze
    const cardsInView = Math.floor((containerWidth + gap) / (cardWidth + gap));
    
    // Maksymalna liczba "przesunięć"
    const maxScrolls = Math.ceil(visibleCards.length / cardsInView) - 1;
    
    // Pobierz aktualne przesunięcie (lub ustaw na 0)
    let currentScroll = parseInt(cardsContainer.dataset.currentScroll || '0', 10);
    
    // Aktualizacja widoczności strzałek
    arrowLeft.classList.toggle('hidden', currentScroll === 0);
    arrowRight.classList.toggle('hidden', currentScroll >= maxScrolls || visibleCards.length <= cardsInView);

    // Oblicz nowe przesunięcie
    const offset = currentScroll * cardsInView * (cardWidth + gap);
    cardsContainer.style.transform = `translateX(-${offset}px)`;
  };

  const filterCards = () => {
    const term = searchInput.value.toLowerCase();
    allCards.forEach(card => {
      const title = card.querySelector('h2').textContent.toLowerCase();
      card.classList.toggle('hidden-by-search', !title.includes(term));
    });
    // Zresetuj pozycję slidera po filtrowaniu
    cardsContainer.dataset.currentScroll = '0';
    updateSliderState();
  };
  
  arrowRight.addEventListener('click', () => {
    let currentScroll = parseInt(cardsContainer.dataset.currentScroll || '0', 10);
    cardsContainer.dataset.currentScroll = currentScroll + 1;
    updateSliderState();
  });

  arrowLeft.addEventListener('click', () => {
    let currentScroll = parseInt(cardsContainer.dataset.currentScroll || '0', 10);
    cardsContainer.dataset.currentScroll = Math.max(0, currentScroll - 1);
    updateSliderState();
  });
  
  searchInput.addEventListener('input', filterCards);
  window.addEventListener('resize', () => setTimeout(updateSliderState, 150));

  document.querySelectorAll(".read-more").forEach(link => {
    link.addEventListener("click", async (event) => {
      event.preventDefault();
      const mdFile = link.getAttribute("data-md");
      if (!mdFile) return;

      const articleContent = document.getElementById("articleContent");
      const articleTitle = document.querySelector("#articleSection h2");
      articleContent.innerHTML = "<p>Ładowanie...</p>";
      articleTitle.textContent = "Ładowanie artykułu...";

      try {
        const response = await fetch(mdFile);
        if (!response.ok) throw new Error("Nie można załadować pliku: " + mdFile);
        const text = await response.text();
        articleContent.innerHTML = marked.parse(text);

        const firstHeading = articleContent.querySelector("h1, h2");
        if (firstHeading) {
          articleTitle.textContent = firstHeading.textContent;
          firstHeading.remove();
        } else articleTitle.textContent = "Artykuł";
      } catch (err) {
        articleContent.innerHTML = "<p>Błąd ładowania artykułu.</p>";
        articleTitle.textContent = "Błąd";
        console.error(err);
      }
    });
  });

  // Ulepszyłem także logikę slidera, aby przewijał całe "strony" kart
  // zamiast pojedynczych kart, co jest bardziej intuicyjne.
  updateSliderState();
});
</script>

</body>
</html>
