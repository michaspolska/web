<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<!-- BARDZO WAŻNE: Ten tag instruuje telefon, by renderował stronę poprawnie -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Blog inspirowany TM - Strona Główna</title>
<style>
:root {
  --primary-bg: #fdfbf7;
  --card-bg: #ffffff;
  --card-hover: #f3f1ec;
  --text-color: #333;
  --accent-color: #006d77;
  --accent-hover: #004f58;
  --footer-bg: #eaeaea;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: 'Georgia', serif;
  background-color: var(--primary-bg);
  color: var(--text-color);
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}

header {
  background-color: white;
  padding: 25px 15px;
  border-bottom: 1px solid #ddd;
  text-align: center;
  font-size: 1.6rem;
  font-weight: bold;
}

nav {
  background-color: white;
  border-bottom: 1px solid #ddd;
  padding: 15px;
  text-align: center;
  margin-bottom: 20px;
  font-size: 1.1rem;
}

nav a {
  margin: 0 10px;
  text-decoration: none;
  color: var(--accent-color);
  font-weight: bold;
  transition: color 0.3s ease;
}

nav a:hover { color: var(--accent-hover); }

.container { flex: 1; padding: 0 15px 30px 15px; }

#searchInput {
  width: 100%;
  padding: 12px 15px;
  font-size: 1.2rem;
  border: 1px solid #ccc;
  border-radius: 8px;
  margin: 0 auto 20px;
  display: block;
}

.slider-wrapper {
  /* Dodajemy ten wrapper, aby strzałki nie były wewnątrz przewijanego obszaru */
}

.slider-container {
  position: relative;
  /* Domyślnie dla desktopu przewijanie jest wyłączone (steruje nim JS) */
  overflow-x: hidden;
  padding-bottom: 20px;
}

/* Ukrycie paska przewijania */
.slider-container::-webkit-scrollbar { display: none; }
.slider-container { -ms-overflow-style: none; scrollbar-width: none; }


.cards {
  display: flex;
  gap: 20px;
  transition: transform 0.5s ease-in-out;
  padding-left: 5px; /* Mały padding, by cień pierwszej karty był widoczny */
}

.card {
  background-color: var(--card-bg);
  border-radius: 12px;
  padding: 20px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
  flex: 0 0 90%;
  display: flex;
  flex-direction: column;
  text-align: center;
}

.card:hover { background-color: var(--card-hover); }

.card p { flex-grow: 1; margin: 10px 0; text-align: center; font-size: 1.1rem; }
.card .header h2 { font-size: 1.3rem; margin-bottom: 5px; }
.read-more { margin-top: auto; font-size: 1.1rem; }

.article-section {
  background-color: white;
  padding: 25px 15px;
  border-radius: 12px;
  margin-top: 20px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
}
.article-section h2 { font-size: 1.5rem; text-align: center; margin-bottom: 15px; }
.article-section div { font-size: 1.1rem; line-height: 1.6; }

footer {
  background-color: var(--footer-bg);
  padding: 15px;
  text-align: center;
  font-size: 0.95rem;
  color: #555;
  margin-top: 20px;
}

/* --- KONTENER STRZAŁEK (TYLKO DLA DESKTOPU) --- */
.slider-arrows {
  display: flex;
  justify-content: center;
  gap: 40px;
  margin-top: 15px;
}
.arrow {
  background-color: rgba(0, 107, 119, 0.8);
  color: white;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-size: 1.5rem;
  user-select: none;
  transition: background-color 0.3s ease, visibility 0.3s ease;
}
.arrow:hover { background-color: var(--accent-hover); }

/* Klasa do ukrywania strzałek na krańcach slidera na desktopie (używana w JS) */
.hidden {
  visibility: hidden;
  opacity: 0;
}


/* === KLUCZOWE ZMIANY DLA URZĄDZEŃ MOBILNYCH (max 700px) === */
@media (max-width: 700px) {
  /* 1. CAŁKOWICIE UKRYJ STRZAŁKI */
  .slider-arrows {
    display: none;
  }
  
  /* 2. WŁĄCZ PRZEWIJANIE PALCEM */
  .slider-container {
    overflow-x: auto; /* To jest kluczowe dla przesuwania palcem! */
    -webkit-overflow-scrolling: touch; /* Płynniejsze przewijanie na iOS */
    scroll-snap-type: x mandatory; /* Włącz przyciąganie */
    scroll-padding: 0 15px; /* Dystans od krawędzi przy przyciąganiu */
  }
  
  .card {
    scroll-snap-align: center; /* Przyciągaj karty do środka */
  }
  
  /* 3. Wyłącz transformacje JS na mobile, bo steruje tym natywne przewijanie */
  .cards {
    transform: none !important;
  }
}

/* responsywne karty */
@media (min-width: 480px) { .card { flex: 0 0 48%; } }
@media (min-width: 768px) { .card { flex: 0 0 calc((100% - 2 * 20px)/3); } }
@media (min-width: 1024px) { .card { flex: 0 0 calc((100% - 3 * 20px)/4); } }

.hidden-by-search { display: none !important; }

</style>

<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>

<header>Blog inspirowany TM</header>
<nav>
  <a href="#">Start</a>
  <a href="#">Artykuły</a>
  <a href="#">Statystyki</a>
  <a href="#">Podcast</a>
  <a href="#">O mnie</a>
  <a href="#">Kontakt</a>
</nav>

<div class="container">
  <input type="text" id="searchInput" placeholder="Szukaj po tytułach artykułów..." />

  <!-- Zmiana w HTML: opakowałem slider i strzałki w jeden kontener -->
  <div class="slider-wrapper">
    <div class="slider-container" aria-label="Slider artykułów">
      <div class="cards" id="cards">
        <div class="card"><div class="header"><h2>Jak stać się bardziej produktywnym?</h2></div><p>Poznaj 5 sprawdzonych metod...</p><a href="#" class="read-more" data-md="produktywnosc.md">Czytaj dalej →</a></div>
        <div class="card"><div class="header"><h2>Minimalizm: mniej znaczy więcej</h2></div><p>Jak ograniczenie rzeczy pomogło mi...</p><a href="#" class="read-more" data-md="minimalizm.md">Czytaj dalej →</a></div>
        <div class="card"><div class="header"><h2>Poranna rutyna ludzi sukcesu</h2></div><p>Odkryj, co łączy poranki Tima Ferrissa...</p><a href="#" class="read-more" data-md="rutyna.md">Czytaj dalej →</a></div>
        <div class="card"><div class="header"><h2>Startup bez ryzyka – jak zacząć</h2></div><p>Naucz się, jak uruchomić biznes online...</p><a href="#" class="read-more" data-md="startup.md">Czytaj dalej →</a></div>
        <div class="card"><div class="header"><h2>Kolejny artykuł testowy</h2></div><p>Opis kolejnego artykułu do testów.</p><a href="#" class="read-more" data-md="test.md">Czytaj dalej →</a></div>
        <div class="card"><div class="header"><h2>Jeszcze jeden wpis na bloga</h2></div><p>Krótki opis tego, co znajdziesz w środku.</p><a href="#" class="read-more" data-md="wpis.md">Czytaj dalej →</a></div>
      </div>
    </div>
    
    <div class="slider-arrows">
      <div class="arrow arrow-left" id="arrowLeft">&#8592;</div>
      <div class="arrow arrow-right" id="arrowRight">&#8594;</div>
    </div>
  </div>

  <section class="article-section" id="articleSection">
    <h2>Wybierz artykuł z listy powyżej</h2>
    <div id="articleContent"></div>
  </section>
</div>

<footer>© 2025 Michał - Blog inspirowany TM</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const cardsContainer = document.getElementById('cards');
  const arrowLeft = document.getElementById('arrowLeft');
  const arrowRight = document.getElementById('arrowRight');
  const searchInput = document.getElementById('searchInput');
  const allCards = Array.from(cardsContainer.children);
  let currentIndex = 0;

  const updateSlider = () => {
    // Na mobile nic nie robimy - za wszystko odpowiada CSS
    if (window.innerWidth <= 700) {
      return; 
    }

    // Poniższa logika jest tylko dla desktopu
    const visibleCards = allCards.filter(card => !card.classList.contains('hidden-by-search'));
    if (!visibleCards.length) {
      arrowLeft.classList.add('hidden');
      arrowRight.classList.add('hidden');
      return;
    }
    
    const containerWidth = cardsContainer.parentElement.offsetWidth;
    const cardWidth = visibleCards[0].offsetWidth;
    const gap = parseInt(window.getComputedStyle(cardsContainer).gap) || 20;
    const cardsInView = Math.floor((containerWidth + gap) / (cardWidth + gap));
    
    const maxIndex = Math.max(0, visibleCards.length - cardsInView);
    currentIndex = Math.max(0, Math.min(currentIndex, maxIndex));

    const offset = currentIndex * (cardWidth + gap);
    cardsContainer.style.transform = `translateX(-${offset}px)`;

    arrowLeft.classList.toggle('hidden', currentIndex === 0);
    arrowRight.classList.toggle('hidden', currentIndex >= maxIndex);
  };
  
  const filterCards = () => {
    const term = searchInput.value.toLowerCase();
    allCards.forEach(card => {
      const title = card.querySelector('h2').textContent.toLowerCase();
      card.classList.toggle('hidden-by-search', !title.includes(term));
    });
    currentIndex = 0; // Resetuj pozycję po filtrowaniu
    updateSlider();
  };
  
  arrowRight.addEventListener('click', () => { currentIndex++; updateSlider(); });
  arrowLeft.addEventListener('click', () => { currentIndex--; updateSlider(); });
  searchInput.addEventListener('input', filterCards);
  
  // Używamy setTimeout, by dać przeglądarce chwilę na przeliczenie layoutu
  window.addEventListener('resize', () => setTimeout(updateSlider, 150));
  
  document.querySelectorAll(".read-more").forEach(link => {
    link.addEventListener("click", async (event) => {
      event.preventDefault();
      const mdFile = link.getAttribute("data-md");
      if (!mdFile) return;

      const articleContent = document.getElementById("articleContent");
      const articleTitle = document.querySelector("#articleSection h2");
      articleContent.innerHTML = "<p>Ładowanie...</p>";
      articleTitle.textContent = "Ładowanie artykułu...";

      try {
        const response = await fetch(mdFile);
        if (!response.ok) throw new Error("Nie można załadować pliku: " + mdFile);
        const text = await response.text();
        articleContent.innerHTML = marked.parse(text);

        const firstHeading = articleContent.querySelector("h1, h2");
        if (firstHeading) {
          articleTitle.textContent = firstHeading.textContent;
          firstHeading.remove();
        } else {
          articleTitle.textContent = "Artykuł";
        }
      } catch (err) {
        articleContent.innerHTML = "<p>Błąd ładowania artykułu.</p>";
        articleTitle.textContent = "Błąd";
        console.error(err);
      }
    });
  });

  // Uruchomienie slidera przy starcie strony
  updateSlider();
});
</script>

</body>
</html>
