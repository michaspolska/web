<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8" />
<title>Blog inspirowany TM - Strona Główna</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root {
  --primary-bg: #fdfbf7;
  --card-bg: #ffffff;
  --card-hover: #f3f1ec;
  --text-color: #333;
  --accent-color: #006d77;
  --accent-hover: #004f58;
  --footer-bg: #eaeaea;
}
* { box-sizing: border-box; }
body { margin: 0; font-family: 'Georgia', serif; background-color: var(--primary-bg); color: var(--text-color); display: flex; flex-direction: column; min-height: 100vh; }
header, nav, .container, footer { max-width: 1100px; width: 100%; margin: 0 auto; }
header { background-color: white; padding: 15px; border-bottom: 1px solid #ddd; text-align: center; font-size: 1.2rem; }
nav { background-color: white; border-bottom: 1px solid #ddd; padding: 8px 15px; text-align: center; margin-bottom: 20px; font-size: 0.95rem; }
nav a { margin: 0 10px; text-decoration: none; color: var(--accent-color); font-weight: bold; transition: color 0.3s ease; }
nav a:hover { color: var(--accent-hover); }

.container { flex: 1; padding: 0 15px 30px 15px; }

#searchInput {
  width: 100%; padding: 8px 12px; font-size: 0.95rem; border: 1px solid #ccc; border-radius: 8px; margin: 0 auto 20px; display: block;
}

.slider-container {
  position: relative;
  overflow: hidden;
  padding-bottom: 20px;
}
.cards {
  display: flex; gap: 20px;
  transition: transform 0.5s ease;
}
.card {
  background-color: var(--card-bg);
  border-radius: 12px;
  padding: 15px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
  flex: 0 0 100%;
  display: flex;
  flex-direction: column;
  text-align: center;
}
.card:hover { background-color: var(--card-hover); }
.card p { flex-grow: 1; margin-top: 0; margin-bottom: 10px; text-align: center; font-size: 0.95rem; }
.card .header h2 { font-size: 1.1rem; }
.read-more { margin-top: auto; font-size: 0.95rem; }

.article-section { background-color: white; padding: 25px 15px; border-radius: 12px; margin-top: 20px; box-shadow: 0 2px 6px rgba(0,0,0,0.08); }
.article-section h2 { font-size: 1.2rem; text-align: center; margin-bottom: 15px; }
.article-section div { font-size: 0.95rem; line-height: 1.5; }

footer { background-color: var(--footer-bg); padding: 15px; text-align: center; font-size: 0.85rem; color: #555; margin-top: 20px; }

@media (min-width: 480px) { .card { flex: 0 0 48%; } }
@media (min-width: 768px) { .card { flex: 0 0 calc((100% - 3 * 20px) / 3); } }
@media (min-width: 1024px) { .card { flex: 0 0 calc((100% - 3 * 20px) / 4); } }

.arrow {
  position: absolute; top: 50%; transform: translateY(-50%);
  background-color: rgba(0, 107, 119, 0.8); color: white;
  width: 40px; height: 40px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  cursor: pointer; user-select: none; font-size: 1.5rem;
  transition: background-color 0.3s ease;
  z-index: 10;
}
.arrow:hover { background-color: var(--accent-hover); }
.arrow-left { left: 10px; }
.arrow-right { right: 10px; }
.arrow.hidden { opacity: 0; visibility: hidden; pointer-events: none; }
@media (max-width: 700px) {
  .arrow { display: none; }
  .cards { overflow-x: auto; scroll-snap-type: x mandatory; -webkit-overflow-scrolling: touch; transform: none; }
  .card { flex: 0 0 80%; scroll-snap-align: center; }
}
</style>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>

<header><h1>Blog inspirowany TM</h1></header>
<nav>
  <a href="#">Start</a>
  <a href="#">Artykuły</a>
  <a href="#">Statystyki</a>
  <a href="#">Podcast</a>
  <a href="#">O mnie</a>
  <a href="#">Kontakt</a>
</nav>

<div class="container">
  <input type="text" id="searchInput" placeholder="Szukaj po tytułach artykułów..." />

  <div class="slider-container">
    <div class="cards" id="cards">
      <div class="card"><div class="header"><h2>Jak stać się bardziej produktywnym?</h2></div><p>Poznaj 5 sprawdzonych metod...</p><a href="#" class="read-more" data-md="produktywnosc.md">Czytaj dalej →</a></div>
      <div class="card"><div class="header"><h2>Minimalizm: mniej znaczy więcej</h2></div><p>Jak ograniczenie rzeczy pomogło mi...</p><a href="#" class="read-more" data-md="minimalizm.md">Czytaj dalej →</a></div>
      <div class="card"><div class="header"><h2>Poranna rutyna ludzi sukcesu</h2></div><p>Odkryj, co łączy poranki Tima Ferrissa...</p><a href="#" class="read-more" data-md="rutyna.md">Czytaj dalej →</a></div>
      <div class="card"><div class="header"><h2>Startup bez ryzyka – jak zacząć</h2></div><p>Naucz się, jak uruchomić biznes online...</p><a href="#" class="read-more" data-md="startup.md">Czytaj dalej →</a></div>
    </div>

    <button class="arrow arrow-left" id="arrowLeft">&#8592;</button>
    <button class="arrow arrow-right" id="arrowRight">&#8594;</button>
  </div>

  <section class="article-section" id="articleSection">
    <h2>Wybierz artykuł z listy powyżej</h2>
    <div id="articleContent"></div>
  </section>
</div>

<footer>© 2025 Michał - Blog inspirowany TM</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const cardsContainer = document.getElementById('cards');
  const allCards = Array.from(cardsContainer.children);
  const arrowLeft = document.getElementById('arrowLeft');
  const arrowRight = document.getElementById('arrowRight');
  const searchInput = document.getElementById('searchInput');
  let currentIndex = 0;

  const getVisibleCardsCount = () => window.innerWidth <= 700 ? 1 : window.innerWidth <= 1024 ? 2 : 4;

  const updateSlider = () => {
    const cardsPerPage = getVisibleCardsCount();
    const visibleCards = allCards.filter(c => !c.classList.contains('hidden-by-search'));
    if (!visibleCards.length) { arrowLeft.classList.add('hidden'); arrowRight.classList.add('hidden'); return; }

    const cardWidth = visibleCards[0].offsetWidth;
    const gap = 20;
    const maxIndex = Math.max(0, visibleCards.length - cardsPerPage);
    currentIndex = Math.max(0, Math.min(currentIndex, maxIndex));

    if (window.innerWidth > 700) cardsContainer.style.transform = `translateX(-${currentIndex*(cardWidth+gap)}px)`;

    arrowLeft.classList.toggle('hidden', currentIndex===0);
    arrowRight.classList.toggle('hidden', currentIndex>=maxIndex);
  };

  arrowLeft.addEventListener('click', () => { currentIndex--; updateSlider(); });
  arrowRight.addEventListener('click', () => { currentIndex++; updateSlider(); });

  searchInput.addEventListener('input', () => {
    const term = searchInput.value.toLowerCase();
    allCards.forEach(card => {
      const title = card.querySelector('h2').textContent.toLowerCase();
      card.classList.toggle('hidden-by-search', !title.includes(term));
    });
    currentIndex = 0;
    updateSlider();
    if (window.innerWidth <= 700) cardsContainer.scrollLeft = 0;
  });

  window.addEventListener('resize', () => { setTimeout(updateSlider, 150); });

  // ładowanie artykułów
  document.querySelectorAll(".read-more").forEach(link => {
    link.addEventListener("click", async e => {
      e.preventDefault();
      const mdFile = link.dataset.md;
      if (!mdFile) return;
      const articleContent = document.getElementById("articleContent");
      const articleTitle = document.querySelector("#articleSection h2");
      articleContent.innerHTML = "<p>Ładowanie...</p>";
      articleTitle.textContent = "Ładowanie artykułu...";
      try {
        const resp = await fetch(mdFile);
        if (!resp.ok) throw new Error("Błąd ładowania: "+mdFile);
        const text = await resp.text();
        articleContent.innerHTML = marked.parse(text);
        const firstHeading = articleContent.querySelector("h1, h2");
        if (firstHeading) { articleTitle.textContent = firstHeading.textContent; firstHeading.remove(); } 
        else articleTitle.textContent = "Artykuł";
      } catch(err) {
        articleContent.innerHTML = "<p>Błąd ładowania artykułu.</p>";
        articleTitle.textContent = "Błąd";
        console.error(err);
      }
    });
  });

  updateSlider();
});
</script>
</body>
</html>
