<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <title>Blog inspirowany TM - Strona Główna</title>
  <style>
:root {
  --primary-bg: #fdfbf7;
  --card-bg: #ffffff;
  --card-hover: #f3f1ec;
  --text-color: #333;
  --accent-color: #006d77;
  --accent-hover: #004f58;
  --footer-bg: #eaeaea;
  --button-color: #00aba9;
  --button-hover: #008e8e;
}

* { box-sizing: border-box; }
body {
  margin: 0;
  font-family: 'Georgia', serif;
  background-color: var(--primary-bg);
  color: var(--text-color);
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}

header, nav, .container, footer {
  max-width: 1100px;
  width: 100%;
  margin: 0 auto;
}

header {
  background-color: white;
  padding: 15px;
  border-bottom: 1px solid #ddd;
  text-align: center;
  font-size: 1.2rem;
}

nav {
  background-color: white;
  border-bottom: 1px solid #ddd;
  padding: 8px 15px;
  text-align: center;
  margin-bottom: 20px;
  font-size: 0.95rem;
}

nav a {
  margin: 0 10px;
  text-decoration: none;
  color: var(--accent-color);
  font-weight: bold;
  transition: color 0.3s ease;
}

nav a:hover { color: var(--accent-hover); }

.container { flex: 1; padding: 0 15px 30px 15px; }

#searchInput {
  width: 100%;
  padding: 10px 15px;
  font-size: 1rem;
  border: 1px solid #ccc;
  border-radius: 8px;
  margin: 0 auto 20px;
  display: block;
}

.slider-container {
  position: relative;
  overflow-x: auto;
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
  padding-bottom: 20px;
}

.cards {
  display: flex;
  gap: 20px;
  transition: transform 0.5s ease;
}

.card {
  background-color: var(--card-bg);
  border-radius: 12px;
  padding: 20px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
  flex: 0 0 100%;
  display: flex;
  flex-direction: column;
  text-align: center;
}

.card:hover { background-color: var(--card-hover); }
.card p { flex-grow: 1; margin-top: 0; margin-bottom: 10px; text-align: center; font-size: 1rem; }
.card .header h2 { font-size: 1.3rem; }
.read-more { margin-top: auto; font-size: 1rem; }

.article-section {
  background-color: white;
  padding: 25px 15px;
  border-radius: 12px;
  margin-top: 20px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
}

.article-section h2 { font-size: 1.4rem; text-align: center; margin-bottom: 15px; }
.article-section div { font-size: 1rem; line-height: 1.6; }

footer {
  background-color: var(--footer-bg);
  padding: 15px;
  text-align: center;
  font-size: 0.95rem;
  color: #555;
  margin-top: 20px;
}

/* responsywne karty */
@media (min-width: 480px) { .card { flex: 0 0 48%; } }
@media (min-width: 768px) { .card { flex: 0 0 calc((100% - 3 * 20px) / 3); } }
@media (min-width: 1024px) { .card { flex: 0 0 calc((100% - 3 * 30px) / 4); } }

/* strzałki */
.arrow {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background-color: rgba(0, 107, 119, 0.8);
  color: white;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  user-select: none;
  font-size: 1.5rem;
  transition: background-color 0.3s ease, opacity 0.3s ease, visibility 0.3s ease;
  z-index: 10;
}

.arrow:hover { background-color: var(--accent-hover); }
.arrow-left { left: 10px; }
.arrow-right { right: 10px; }
.arrow.hidden { opacity: 0; visibility: hidden; pointer-events: none; }

.hidden-by-search { display: none !important; }

/* --- poprawki dla telefonów --- */
@media (max-width: 700px) {
  header { font-size: 1.8rem; padding: 30px 15px; }
  nav { font-size: 1.2rem; padding: 18px 15px; }
  #searchInput { font-size: 1.2rem; padding: 15px 15px; }
  .card { flex: 0 0 95%; padding: 25px; }
  .card .header h2 { font-size: 1.5rem; }
  .card p, .read-more { font-size: 1.1rem; }
  .article-section h2 { font-size: 1.6rem; }
  .article-section div { font-size: 1.1rem; line-height: 1.7; }
  .arrow { display: none; }
}
  </style>

<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>

<header><h1>Blog inspirowany TM</h1></header>
<nav>
  <a href="index.html">Start</a>
  <a href="#">Artykuły</a>
  <a href="#">Statystyki</a>
  <a href="#">Podcast</a>
  <a href="#">O mnie</a>
  <a href="#">Kontakt</a>
</nav>

<div class="container">
  <input type="text" id="searchInput" placeholder="Szukaj po tytułach artykułów..." aria-label="Szukaj po tytułach artykułów" />

  <div class="slider-container" aria-label="Slider artykułów">
    <div class="cards" id="cards">
      <div class="card"><div class="header"><h2>Jak stać się bardziej produktywnym?</h2><div class="date">25 lipca 2025</div></div><p>Poznaj 5 sprawdzonych metod...</p><a href="#" class="read-more" data-md="produktywnosc.md">Czytaj dalej →</a></div>
      <div class="card"><div class="header"><h2>Minimalizm: mniej znaczy więcej</h2><div class="date">20 lipca 2025</div></div><p>Jak ograniczenie rzeczy pomogło mi...</p><a href="#" class="read-more" data-md="minimalizm.md">Czytaj dalej →</a></div>
      <div class="card"><div class="header"><h2>Poranna rutyna ludzi sukcesu</h2><div class="date">15 lipca 2025</div></div><p>Odkryj, co łączy poranki Tima Ferrissa...</p><a href="#" class="read-more" data-md="rutyna.md">Czytaj dalej →</a></div>
      <div class="card"><div class="header"><h2>Startup bez ryzyka – jak zacząć</h2><div class="date">10 lipca 2025</div></div><p>Naucz się, jak uruchomić biznes online...</p><a href="#" class="read-more" data-md="startup.md">Czytaj dalej →</a></div>
    </div>

    <div class="arrow arrow-left" id="arrowLeft" role="button" aria-label="Przesuń w lewo" tabindex="0">&#8592;</div>
    <div class="arrow arrow-right" id="arrowRight" role="button" aria-label="Przesuń w prawo" tabindex="0">&#8594;</div>
  </div>

  <section class="article-section" id="articleSection">
    <h2>Wybierz artykuł z listy powyżej</h2>
    <div id="articleContent"></div>
  </section>
</div>

<footer>© 2025 Michał - Blog inspirowany TM</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const cardsContainer = document.getElementById('cards');
  const arrowLeft = document.getElementById('arrowLeft');
  const arrowRight = document.getElementById('arrowRight');
  const searchInput = document.getElementById('searchInput');
  const allCards = Array.from(cardsContainer.children);
  let currentIndex = 0;

  const isMobile = () => window.innerWidth <= 700;
  const getVisibleCardsCount = () => isMobile() ? 1 : window.innerWidth <= 1024 ? 2 : 4;

  const updateSlider = () => {
    const visibleItems = allCards.filter(card => !card.classList.contains('hidden-by-search'));
    if (!visibleItems.length) {
      arrowLeft.classList.add('hidden');
      arrowRight.classList.add('hidden');
      return;
    }

    if (isMobile()) {
      // na mobile używamy natywnego scrollowania, strzałki całkowicie ukryte
      arrowLeft.classList.add('hidden');
      arrowRight.classList.add('hidden');
      cardsContainer.style.transform = 'none';
      return;
    }

    const cardsPerPage = getVisibleCardsCount();
    const cardWidth = visibleItems[0].offsetWidth;
    const gap = 20;
    const maxIndex = Math.max(0, visibleItems.length - cardsPerPage);
    currentIndex = Math.max(0, Math.min(currentIndex, maxIndex));

    cardsContainer.style.transform = `translateX(-${currentIndex * (cardWidth + gap)}px)`;
    arrowLeft.classList.toggle('hidden', currentIndex === 0);
    arrowRight.classList.toggle('hidden', currentIndex >= maxIndex);
  };

  const filterCards = () => {
    const term = searchInput.value.toLowerCase();
    allCards.forEach(card => {
      const title = card.querySelector('h2').textContent.toLowerCase();
      card.classList.toggle('hidden-by-search', !title.includes(term));
    });
    currentIndex = 0;
    updateSlider();
  };

  // obsługa strzałek
  arrowRight.addEventListener('click', () => { currentIndex++; updateSlider(); });
  arrowLeft.addEventListener('click', () => { currentIndex--; updateSlider(); });

  // obsługa wyszukiwarki
  searchInput.addEventListener('input', filterCards);

  // resize okna
  window.addEventListener('resize', () => setTimeout(updateSlider, 150));

  // obsługa klawiatury dla strzałek
  [arrowLeft, arrowRight].forEach(arrow => {
    arrow.addEventListener('keydown', e => {
      if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); arrow.click(); }
    });
  });

  updateSlider();

  // ładowanie artykułów Markdown
  document.querySelectorAll(".read-more").forEach(link => {
    link.addEventListener("click", async (event) => {
      event.preventDefault();
      const mdFile = link.getAttribute("data-md");
      if (!mdFile) return;

      const articleContent = document.getElementById("articleContent");
      const articleTitle = document.querySelector("#articleSection h2");
      articleContent.innerHTML = "<p>Ładowanie...</p>";
      articleTitle.textContent = "Ładowanie artykułu...";

      try {
        const response = await fetch(mdFile);
        if (!response.ok) throw new Error("Nie można załadować pliku: " + mdFile);
        const text = await response.text();
        articleContent.innerHTML = marked.parse(text);

        const firstHeading = articleContent.querySelector("h1, h2");
        if (firstHeading) {
          articleTitle.textContent = firstHeading.textContent;
          firstHeading.remove();
        } else articleTitle.textContent = "Artykuł";
      } catch (err) {
        articleContent.innerHTML = "<p>Błąd ładowania artykułu.</p>";
        articleTitle.textContent = "Błąd";
        console.error(err);
      }
    });
  });
});
</script>


</body>
</html>
